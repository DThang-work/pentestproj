<?php
//Triệu gọi đến file xử lý thông qua request

$request_path = MODULESPATH . DIRECTORY_SEPARATOR . get_module() . DIRECTORY_SEPARATOR . 'controllers' . DIRECTORY_SEPARATOR . get_controller() . 'Controller.php';

if (file_exists($request_path)) {
    require $request_path;
} else {
    require 'layout/404.php';
}
$action_name = get_action() . 'Action';

call_function(array('construct', $action_name));

function is_login()
{
    if (isset($_SESSION['login'])) {
        return true;
    }
    return false;
}

// $name =  basename($_SERVER['REQUEST_URI'], '?' . $_SERVER['QUERY_STRING']);
// if ((!is_login() && $name != 'dang-nhap.html')) {
//     header("Location:dang-nhap.html");
// }

// if ((isset($_SESSION['is_login']) || get_action() != 'login')) {
//     header("Location:?mod=users&action=login");
// }
// $page = !empty($_GET['mod']) ? $_GET['mod'] : 'home';
// $page = $_GET['page'];
// $path = "modules/{$page}.php";
// Kiem tra login
// if (!empty($_COOKIE['is_login'])) {
//     $_SESSION['is_login'] = $_COOKIE['is_login'];
//     $_SESSION['use_login'] = $_COOKIE['use_login'];
//     header("Location:?page=home");
// }
